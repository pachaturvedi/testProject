{
  "StatusMessage": "{
    ShellProvisioningState":"Succeeded",
  "Shells": [
    {
      "Name": "liftr-shell-action",
      "Properties": {
        \"ExecutionView\": { \r\n
        \"DetailStatus\": \"Error\",
        \r\n \"ExitCode\": 255,
        \r\n \"FinishTime\": \"2021-08-09T10:17:47Z\",
        \r\n \"StartTime\": \"2021-08-09T10:17:37Z\",\r\n          
          \"State\": \"Terminated\"\r\n        }\r\n      },\r\n      \"Log\": \"\\nSeed-2021-08-09 10:17:38.138608: Current directory is /\\nSeed-2021-08-09 10:17:43.175901: Package downloaded at /package/download/liftr-deployment.tar\\nSeed-2021-08-09 10:17:43.544112: Package extracted at /package/unarchive\\nSeed-2021-08-09 10:17:43.544196: Launching package from directory /package/unarchive\\nSeed-2021-08-09 10:17:43.544320: Launching command ['4_DeployAKSApp.sh']\\n2021-08-09 10:17:43.553660: CurrentDir: /package/unarchive\\n2021-08-09 10:17:43.553880: currentScriptName: 4_DeployAKSApp.sh\\n2021-08-09 10:17:43.554062: Get Key Vault endpoint and save on disk.\\n2021-08-09 10:17:45.055168: [10:17:45 INF] ActionExecutor Action:PrepareK8SAppDeployment\\n2021-08-09 10:17:45.087828: [10:17:45 INF] RunnerCommandOptions: {\\\"Action\\\": \\\"PrepareK8SAppDeployment\\\", \\\"ConfigPath\\\": \\\"hosting-options.json\\\", \\\"ExecutingSPNObjectId\\\": \\\"bb8eb613-5ffd-4ece-b7c2-6821b19a69c2\\\", \\\"EnvName\\\": \\\"Dev\\\", \\\"Region\\\": \\\"eastus\\\", \\\"AuthFile\\\": null, \\\"$type\\\": \\\"RunnerCommandOptions\\\"}\\n2021-08-09 10:17:45.088788: [10:17:45 INF] Use Managed Identity to authenticate against Azure.\\n2021-08-09 10:17:45.185585: [10:17:45 INF] Target environment options: {\\\"EnvironmentName\\\": \\\"Dev\\\", \\\"AzureSubscription\\\": \\\"eebfbfdb-4167-49f6-be43-466a6709609f\\\", \\\"Global\\\": {\\\"Location\\\": {\\\"Name\\\": \\\"centralus\\\", \\\"$type\\\": \\\"Region\\\"}, \\\"BaseName\\\": \\\"gbl202001001\\\", \\\"AddGlobalDB\\\": true, \\\"$type\\\": \\\"GlobalOptions\\\"}, \\\"Regions\\\": [{\\\"Location\\\": {\\\"Name\\\": \\\"westus2\\\", \\\"$type\\\": \\\"Region\\\"}, \\\"DataBaseName\\\": \\\"data20210120\\\", \\\"ComputeBaseName\\\": \\\"com20210519\\\", \\\"KubernetesVersion\\\": null, \\\"ZoneRedundant\\\": false, \\\"DataPlaneSubscriptions\\\": null, \\\"Properties\\\": null, \\\"SupportAvailabilityZone\\\": true, \\\"$type\\\": \\\"RegionOptions\\\"}, {\\\"Location\\\": {\\\"Name\\\": \\\"eastus\\\", \\\"$type\\\": \\\"Region\\\"}, \\\"DataBaseName\\\": \\\"data20210120\\\", \\\"ComputeBaseName\\\": \\\"com20210519\\\", \\\"KubernetesVersion\\\": null, \\\"ZoneRedundant\\\": false, \\\"DataPlaneSubscriptions\\\": null, \\\"Properties\\\": null, \\\"SupportAvailabilityZone\\\": true, \\\"$type\\\": \\\"RegionOptions\\\"}, {\\\"Location\\\": {\\\"Name\\\": \\\"westcentralus\\\", \\\"$type\\\": \\\"Region\\\"}, \\\"DataBaseName\\\": \\\"data20210120\\\", \\\"ComputeBaseName\\\": \\\"com20210519\\\", \\\"KubernetesVersion\\\": null, \\\"ZoneRedundant\\\": false, \\\"DataPlaneSubscriptions\\\": null, \\\"Properties\\\": null, \\\"SupportAvailabilityZone\\\": false, \\\"$type\\\": \\\"RegionOptions\\\"}], \\\"OneCertCertificates\\\": {\\\"GenevaClientCert\\\": \\\"ib-rp-mds-agent.geneva.keyvault.liftr-dev.net\\\", \\\"FirstPartyAppCert\\\": \\\"liftr-monitoring.first-party.liftr-dev.net\\\", \\\"DatadogFirstPartyAppCert\\\": \\\"datadog-rp.first-party.liftr-dev.net\\\", \\\"DatadogMPCert\\\": \\\"market-place.datadog.liftr-dev.net\\\", \\\"DatadogRPaaSCert\\\": \\\"datadog-rpaas.first-party.liftr-dev.net\\\", \\\"TokenServicePrimaryCert\\\": \\\"primary-signing.token-svc.liftr-dev.net\\\", \\\"TokenServiceSecondaryCert\\\": \\\"secondary-signing.token-svc.liftr-dev.net\\\"}, \\\"AKSConfigurations\\\": {\\\"AKSMachineCount\\\": 3, \\\"AKSMachineType\\\": {\\\"Value\\\": \\\"Standard_DS2_v2\\\", \\\"$type\\\": \\\"ContainerServiceVMSizeTypes\\\"}, \\\"KubernetesVersion\\\": \\\"1.20.5\\\", \\\"$type\\\": \\\"AKSInfo\\\"}, \\\"VMSSConfigurations\\\": null, \\\"PartnerCredentialUpdateConfig\\\": null, \\\"Geneva\\\": null, \\\"IPPerRegion\\\": 3, \\\"EnableVNet\\\": false, \\\"EnablePromIcM\\\": true, \\\"DomainName\\\": \\\"dd-dev.azliftr-test.io\\\", \\\"LogAnalyticsWorkspaceId\\\": \\\"/subscriptions/eebfbfdb-4167-49f6-be43-466a6709609f/resourceGroups/liftr-dev-wus-rg/providers/Microsoft.OperationalInsights/workspaces/sample-partner-log\\\", \\\"ThanosClientIPRange\\\": null, \\\"IsAKS\\\": true, \\\"Properties\\\": null, \\\"$type\\\": \\\"HostingEnvironmentOptions\\\"}\\n2021-08-09 10:17:45.197122: [10:17:45 INF] Start TimedOperation 'PrepareK8SAppDeployment' with '53b19228-8234-41ed-8da6-2763cc13ca43' at StartTime 2021-08-09T10:17:45.1909492Z.\\n2021-08-09 10:17:45.199069: [10:17:45 INF] Current correlation Id is: 53b19228-8234-41ed-8da6-2763cc13ca43\\n2021-08-09 10:17:45.199247: [10:17:45 INF] You can use correlation Id '53b19228-8234-41ed-8da6-2763cc13ca43' to query all the related ARM logs.\\n2021-08-09 10:17:45.577148: [10:17:45 INF] Getting KeyVault with resource Id subscriptions/eebfbfdb-4167-49f6-be43-466a6709609f/resourceGroups/dd-dev-data20210120-eus-rg/providers/Microsoft.KeyVault/vaults/dddevdata20210120euskv ...\\n2021-08-09 10:17:45.626651: [10:17:45 INF] Application started. Press Ctrl+C to shut down.\\n2021-08-09 10:17:45.629808: [10:17:45 INF] Hosting environment: Dev\\n2021-08-09 10:17:45.630109: [10:17:45 INF] Content root path: /package/unarchive/bin/\\n2021-08-09 10:17:46.288663: [10:17:46 ERR] Cannot find the AKS cluster with resource Id 'subscriptions/eebfbfdb-4167-49f6-be43-466a6709609f/resourceGroups/dd-dev-com20210519-eus-rg/providers/Microsoft.ContainerService/managedClusters/dd-dev-com20210519-eus-aks'. We will not be able to find its public IP address. Please make sure the AKS is provisioned first.\\n2021-08-09 10:17:46.288761: System.InvalidOperationException: Cannot find the AKS cluster with resource Id 'subscriptions/eebfbfdb-4167-49f6-be43-466a6709609f/resourceGroups/dd-dev-com20210519-eus-rg/providers/Microsoft.ContainerService/managedClusters/dd-dev-com20210519-eus-aks'. We will not be able to find its public IP address. Please make sure the AKS is provisioned first.\\n2021-08-09 10:17:46.319978: [10:17:46 FTL] Failed at running the deployment runner. Touble-shooting guide: https://aka.ms/liftr/ev2-failure\\n2021-08-09 10:17:46.320219: System.InvalidOperationException: Cannot find the AKS cluster with resource Id 'subscriptions/eebfbfdb-4167-49f6-be43-466a6709609f/resourceGroups/dd-dev-com20210519-eus-rg/providers/Microsoft.ContainerService/managedClusters/dd-dev-com20210519-eus-aks'. We will not be able to find its public IP address. Please make sure the AKS is provisioned first.\\n2021-08-09 10:17:46.320514:    at Microsoft.Liftr.Fluent.Provisioning.AKSNetworkHelper.GetAKSPublicIPAsync(ILiftrAzure liftrAzureClient, String AKSRGName, String AKSName, Region location, IPCategory ipCategory)\\n2021-08-09 10:17:46.320782:    at Microsoft.Liftr.SimpleDeploy.ActionExecutor.WriteReservedInboundIPToDiskAsync(LiftrAzureFactory azFactory, String aksRGName, String aksName, Region aksLocation, HostingEnvironmentOptions targetOptions, IPPoolManager ipPool)\\n2021-08-09 10:17:46.320983:    at Microsoft.Liftr.SimpleDeploy.ActionExecutor.PrepareK8SDeploymentAsync(HostingEnvironmentOptions targetOptions, KeyVaultClient kvClient, LiftrAzureFactory azFactory)\\n2021-08-09 10:17:46.321388:    at Microsoft.Liftr.SimpleDeploy.ActionExecutor.RunActionAsync(HostingEnvironmentOptions targetOptions, KeyVaultClient kvClient, LiftrAzureFactory azFactory)\\n2021-08-09 10:17:46.322019: [10:17:46 INF] Application is shutting down...\\n2021-08-09 10:17:46.324911: [10:17:46 INF] Finished TimedOperation 'PrepareK8SAppDeployment' with '53b19228-8234-41ed-8da6-2763cc13ca43'. Successful: False. StatusCode: 500. Duration: 1133 ms. Properties: {\\\"LiftrTimedOperationId\\\": \\\"53b19228-8234-41ed-8da6-2763cc13ca43\\\", \\\"PartnerName\\\": \\\"Datadog\\\", \\\"Environment\\\": \\\"Dev\\\", \\\"Location\\\": \\\"eastus\\\", \\\"ExeAction\\\": \\\"PrepareK8SAppDeployment\\\", \\\"FailureMessage\\\": \\\"Cannot find the AKS cluster with resource Id 'subscriptions/eebfbfdb-4167-49f6-be43-466a6709609f/resourceGroups/dd-dev-com20210519-eus-rg/providers/Microsoft.ContainerService/managedClusters/dd-dev-com20210519-eus-aks'. We will not be able to find its public IP address. Please make sure the AKS is provisioned first.\\\"}. StartTime: 2021-08-09T10:17:45.1909492Z, StopTime: 2021-08-09T10:17:46.3243499Z\\nSeed-2021-08-09 10:17:47.218395: ##EXECUTION#COMPLETE####EXITCODE#255##\"\r\n    }\r\n  ],\r\n  \"AzureContainerInstanceName\": \"905BE6425CD9479D91621FCD07A3C0020ShellExteastus\"\r\n}"
